
# **Программное средство реализации онлайн-сервиса для парусных туров**

Проект представляет собой онлайн‑сервис для организации и бронирования парусных туров. Система ориентирована на две ключевые роли: клиента, который выбирает и бронирует тур, и туроператора, который управляет предложениями и бронированиями.

Цели проекта:

- обеспечить удобный поиск и выбор туров по дате, цене и маршруту;

- автоматизировать процесс бронирования и оплаты;

- предоставить клиентам актуальную информацию и поддержку на всех этапах путешествия;

- упростить туроператорам управление турами, оплатами и обратной связью.

Основные возможности:

- каталог туров с фильтрацией и сортировкой;

- просмотр описаний, фотографий, маршрутов и отзывов;

- бронирование мест и онлайн‑оплата;

- уведомления и инструкции для подготовки к туру;

- управление заявками и платежами со стороны туроператора;

- сбор и анализ отзывов для улучшения качества услуг.


Клиент:
https://github.com/A-l-i-n-a-K/WindRoute-frontend.git
Сервер:
https://github.com/A-l-i-n-a-K/WindRoute-backend.git
---

## **Содержание**

1. [Архитектура](#Архитектура)
	1. [C4-модель](#C4-модель)
	2. [Схема данных](#Схема_данных)
2. [Функциональные возможности](#Функциональные_возможности)
	1. [Диаграмма вариантов использования(#Диаграмма_вариантов_использования)]
	2. [User-flow диаграммы](#User-flow_диаграммы)
3. [Детали реализации](#Детали_реализации)
	1. [UML-диаграммы](#UML-диаграммы)
	2. [Спецификация API](#Спецификация_API)
	3. [Безопасность](#Безопасность)
	4. [Оценка качества кода](#Оценка_качества_кода)
4. [Тестирование](#Тестирование)
	1. [Unit-тесты](#Unit-тесты)
	2. [Интеграционные тесты](#Интеграционные_тесты)
5. [Установка и  запуск](#installation)
	1. [Манифесты для сборки docker образов](#Манифесты_для_сборки_docker_образов)
	2. [Манифесты для развертывания k8s кластера](#Манифесты_для_развертывания_k8s_кластера)
6. [Лицензия](#Лицензия)
7. [Контакты](#Контакты)

---
## **Архитектура**

### C4-модель

Для описания архитектурных решений программного средства была использована нотация С4 mo del. Каждый последующий уровень детализирует предыдущий, включая четыре уровня абстракции: контекст, контейнеры, компоненты и классы. 
Контекстный уровень представления программного обеспечения показан ниже.

<img width="974" height="704" alt="image" src="https://github.com/user-attachments/assets/09a95a00-6368-450c-bb2f-9f7fadf34bf0" />

Контейнерный уровень представления архитектуры программного средства представлен ниже.

<img width="863" height="526" alt="image" src="https://github.com/user-attachments/assets/468799c3-e987-429d-a0cf-224d5fa3122f" />

Следующим уровнем представления архитектуры программного средства является компонентный. Он представлен ниже.

<img width="928" height="602" alt="image" src="https://github.com/user-attachments/assets/c464e7bf-39e2-42fc-9268-8550e2a17af2" />

Самым нижним уровнем представления архитектуры является кодовый. Кодовый уровень представления архитектуры представлен ниже.

<img width="953" height="401" alt="image" src="https://github.com/user-attachments/assets/f1ff3224-2087-4941-80fd-0b6e1c5f331b" />

Таким образом, было описано архитектурное решение с использованием нотации C4 model, рассмотрены контекстный, контейнерный, компонентный и кодовый уровни представления архитектуры программного средства.
Clean Architecture – это подход к проектированию программных систем, который направлен на создание гибких, масштабируемых и легко сопровождаемых приложений. Его суть заключается в строгом разделении ответственности между слоями и в том, что бизнес логика (ядро системы) не зависит от деталей реализации – фреймворков, баз данных, пользовательского интерфейса или внешних сервисов. Такая архитектура обеспечивает независимость от технологий, возможность замены интерфейсов и инфраструктуры без переписывания бизнес правил, а также высокую тестируемость.
В основе архитектуры онлайн сервиса для парусных туров лежит доменный слой, который описывает ключевые объекты и их поведение: User с ролью клиента, туроператора или администратора; Tour с маршрутом, датой начала, ценой и координатами; Booking с привязкой к пользователю и туру, статусом и датой создания. Здесь же находятся value объекты вроде Coordinates и SearchCriteria. Этот слой формулирует бизнес правила и ограничения, не зная, как именно данные будут храниться или отображаться.
Над ним расположен слой прикладных сценариев, где описаны конкретные действия системы. Каждый сценарий – это отдельный use case, который принимает входные данные, взаимодействует с сущностями и репозиториями, проверяет условия и возвращает результат. Например, сценарий бронирования проверяет доступность тура, создаёт запись и инициирует уведомление; сценарий поиска туров применяет фильтры и возвращает список подходящих маршрутов; сценарий регистрации создаёт нового пользователя и отправляет приветственное сообщение.
Слой адаптеров отвечает за связь бизнес логики с внешними системами. Здесь находятся контроллеры, принимающие запросы от React SPA и преобразующие их в команды или запросы к use case. Репозитории реализуют доступ к MySQL, сервисы интеграции работают с Google Maps API для отображения маршрутов и с Notification Service для отправки сообщений. DTO и мапперы обеспечивают преобразование данных между слоями, а презентеры формируют ответы для фронтенда.
На внешнем уровне находится инфраструктурный слой, где собраны конкретные технологии: React SPA для пользовательского интерфейса, Spring Boot для backend сервисов, MySQL для хранения данных,  Google Maps API для карт и геолокации, WebSocket для уведомлений в реальном времени. Этот слой можно заменить или модернизировать без изменения внутренней логики.





### Схема данных

<img width="974" height="979" alt="image" src="https://github.com/user-attachments/assets/e96de826-d561-4600-af23-a703bef427ca" />


---

## **Функциональные возможности**

### Диаграмма вариантов использования

<img width="957" height="735" alt="image" src="https://github.com/user-attachments/assets/c8cc28af-6e69-4b17-9aaa-49a6a3bdefe1" />
Диаграмма отражает взаимодействие двух основных акторов: Клиента и Туроператора.
Со стороны Клиента предусмотрены ключевые сценарии работы с сервисом. Пользователь может искать и выбирать туры, задавая параметры поиска, просматривать результаты и добавлять понравившиеся варианты в избранное. После выбора тура клиент переходит к бронированию: вводит персональные данные, количество участников, выбирает дополнительные услуги и может указать пожелания. В дальнейшем он имеет возможность отменить бронь. В личном кабинете клиент управляет своим профилем – редактирует данные и просматривает уведомления от системы. Также он получает доступ к истории бронирований: активные показывают предстоящие поездки, где можно отменить тур, скачать билет и посмотреть детали, а завершённые позволяют просмотреть детали и при необходимости повторить бронирование.
Туроператор работает с системой с другой стороны. Его основная задача – управление турами: создание новых предложений, редактирование и просмотр деталей существующих. Он обрабатывает клиентские заявки, подтверждает бронирования и формирует билеты. Кроме того, туроператор имеет доступ к отчётности: может создавать отчёты, выгружать их в удобных форматах Также предусмотрен просмотр сводных данных по клиентам, что помогает анализировать спрос и эффективность работы.

### User-flow диаграммы

Ниже представлен пользовательский сценарий работы клиента с онлайн сервисом парусных туров. Он отражает последовательность действий от входа в систему до поиска, бронирования и оплаты тура, а также показывает возможные развилки и варианты завершения процесса.

<img width="5883" height="5053" alt="Клиент" src="https://github.com/user-attachments/assets/30e0c9cc-7bd4-4a52-b655-4cd2f99afcdd" />

Клиент заходит в приложение. На главной странице он видит краткое описание сервиса, рекламные баннеры с актуальными турами и кнопку для входа или регистрации. Если пользователь новый, он проходит процедуру регистрации, указывая имя, адрес электронной почты, пароль и контактные данные. Уже зарегистрированный клиент входит в систему по логину и паролю, после чего сервис проверяет корректность введённых данных. Если данные неверны, система просит повторно ввести данные, если верны – открывает личный кабинет.
В личном кабинете клиент получает доступ к основным функциям: он может редактировать свой профиль, добавляя или изменяя личные данные, пароль и просматривать уведомления от системы, такие как напоминание об оплате, подтверждение бронирования и сообщения от туроператора.
Также клиент может просмотреть свою историю бронирований, как завершенных туров, так и активных бронирований. Для предстоящего тура пользователь может отменить бронь, скачать билет, оплатить тур, если он не был оплачен ранее, а также просмотреть детали тура. Для завершенных – просмотреть детали, повторно его забронировать и оставить отзыв.
Клиент может сразу перейти к поиску новых туров. При переходе на страницу туров, ему будут представлены все доступные. Для поиска он задаёт параметры – даты, маршрут, длительность, стоимость, количество участников и дополнительные услуги. Система формирует список доступных вариантов, из которого клиент выбирает подходящий тур. На странице выбранного тура он знакомится с описанием маршрута, фотографиями яхты и условий проживания, стоимостью и перечнем включённых услуг, а также с отзывами других участников. Если предложение его не устраивает, он продолжает искать подходящий, иначе может его забронировать или добавить в избранное.
При бронировании тура открывается форма бронирования, где клиент указывает количество участников, выбирает дополнительные услуги, такие как аренда снаряжения или питание, и может оставить специальные пожелания. Система проверяет корректность введённых данных, если данные некорректны просит повторить ввод, иначе переводит пользователя к этапу оплаты. Клиент выбирает удобный способ – банковскую карту, онлайн кошелёк или другой доступный вариант. Далее пользователь подтверждает оплату. При успешной оплате система сообщает об успешной оплате, а при ошибке уведомляет клиента и предлагает повторить попытку. Если клиент отказывается, тур помечается статусом «Ожидает оплаты». Если оплата не будет произведена в течении 24 часов, то клиент получает сообщение об отмене бронирования.
Дополнительно сервис позволяет сохранить тур в «Избранное» для будущего бронирования. В том же разделе он может просмотреть ранее сохраненные туры или удалить их оттуда. Завершая процесс, клиент выходит из программы.
Далее приведён пользовательский сценарий работы туроператора в онлайн сервисе. Он описывает шаги по управлению турами, обработке заявок клиентов, взаимодействию с системой уведомлений и формированию отчётности, что позволяет проследить ключевые бизнес процессы со стороны поставщика услуг.

<img width="6072" height="4232" alt="Туроператоры" src="https://github.com/user-attachments/assets/017f3fcc-c585-4abd-a526-965e1986fc4c" />

Туроператор заходит в приложение. На главной странице он выбирает вход для туроператора и вводит логин и пароль. Система проверяет корректность данных: если они неверны, оператору предлагается повторить ввод, если верны – открывается личный кабинет.
В личном кабинете туроператор получает доступ к основным функциям. Он может редактировать профиль компании, добавляя или изменяя контактные данные, описание, логотип и условия сотрудничества. Также в кабинете отображаются уведомления от системы: новые заявки клиентов, напоминания об оплате, сообщения и вопросы от пользователей.
Основной раздел работы туроператора – управление турами. При переходе на страницу система сразу показывает список всех созданных туров. Здесь оператор может просмотреть их, отфильтровать по датам или статусу, а также выполнить поиск. Далее он выбирает действие: добавить новый тур или работать с существующим. При добавлении открывается форма, где указываются маршрут, даты, стоимость, описание, фотографии и дополнительные услуги. После проверки корректности данных тур сохраняется как черновик, после он может опубликовать его в каталоге. Если он этого не делает, то тур остается в статусе «Черновик». При работе с существующим туром оператор может просмотреть его детали, внести изменения, заархивировать или удалить, если нет активных бронирований. Если изменения затрагивают уже подтверждённые заявки, система требует уведомить клиентов или согласовать корректировки.
Также туроператор обрабатывает заявки клиентов. Туроператор видит список всех заявок с указанием их статуса: новые, подтверждённые, оплаченные или отменённые. Для каждой заявки он может выбрать действие: подтвердить, отклонить или запросить уточнения. При подтверждении система проверяет соответствие условий. Если всё корректно, клиент получает уведомление и может оплатить тур. Если условия не соответствуют, оператор предлагает альтернативы, если клиент отказывается, то туроператор отклоняет заявку. После подтверждения система отслеживает оплату: при успешном платеже формируются документы, при отсутствии оплаты в течении 24 часов бронь отменяется и клиенту отправляется сообщение об отмене. При отклонении заявки туроператор указывает причину и отправляет уведомление клиенту.
Дополнительно туроператор имеет доступ к отчетности и аналитике. Здесь он получает три варианта работы с данными. Если необходимо подготовить документы, он выбирает выгрузку отчётов в формате PDF или Excel, чтобы сохранить их для внутреннего использования или передачи руководству. Если важна наглядность, оператор открывает визуализированные данные и видит графики и диаграммы, которые показывают динамику спроса, загрузку туров и финансовые показатели. Если же нужен быстрый доступ к цифрам, он просматривает таблицу основных метрик, где собраны ключевые показатели: количество заявок, процент оплаченных туров и выручка за период.
Завершая работу, туроператор выходит из системы, при этом все изменения сохраняются, а новые туры и обновлённые заявки становятся доступны клиентам.




---

## **Детали реализации**

### UML-диаграммы

<img width="974" height="663" alt="image" src="https://github.com/user-attachments/assets/f8835694-3a9d-421e-9a2b-9112d63b8a73" />
Диаграмма последовательности отражает взаимодействие четырёх участников: Клиента, Системы, Туроператора и Базы данных. Процесс начинается с того, что клиент выбирает интересующий его тур и инициирует бронирование. Система в ответ отображает форму, куда клиент поочерёдно вводит необходимые данные: личную информацию, количество участников, выбор дополнительных услуг и пожелания. После получения этих данных система обращается к базе данных и создаёт новую запись о бронировании со статусом «Новая». База данных подтверждает сохранение, и система уведомляет туроператора о поступившей заявке. Туроператор открывает заявку, просматривает её детали и принимает решение: подтвердить или отклонить. Его действие передаётся обратно в систему, которая обновляет статус бронирования в базе данных. После подтверждения изменения база данных возвращает системе подтверждение, и система уведомляет клиента о результате. Если заявка подтверждена, клиент получает сообщение о подтверждении и деталях тура; если отклонена – уведомление с указанием причины.

<img width="974" height="693" alt="image" src="https://github.com/user-attachments/assets/b42adf10-bb3d-448e-bee6-559e73ce539f" />
Жизненный цикл заявки в системе бронирования туров начинается с её создания клиентом. В этот момент объект «Заявка» переходит в состояние «Создана», а система фиксирует факт подачи и уведомляет туроператора.
Далее заявка попадает в состояние «На рассмотрении», где туроператор анализирует предоставленные данные. На этом этапе возможны два исхода:
‒	если туроператор подтверждает заявку, она переходит в состояние «Подтверждена»;
‒	если туроператор отклоняет заявку, она переходит в состояние «Отклонена».
Подтверждённая заявка становится «Активной», то есть ожидает исполнения тура. В этом состоянии возможны два варианта развития:
‒	клиент может отменить заявку до начала тура, и тогда она переходит в состояние «Отменена клиентом»;
‒	если тур состоялся, заявка переводится в состояние «Завершена».
Любое из конечных рабочих состояний – «Отклонена», «Отменена клиентом» или «Завершена» – завершается переходом в состояние «Архивирована», где заявка сохраняется для истории и аналитики.

<img width="694" height="831" alt="image" src="https://github.com/user-attachments/assets/348bb13c-2169-4def-9d63-fbc8a382b9d1" />
Процесс начинается с инициативы клиента, который выбирает интересующий тур и переходит к заполнению формы бронирования. На этом этапе он последовательно вводит личные данные, количество участников, дополнительные услуги и пожелания. После завершения заполнения клиент отправляет заявку.
Система принимает данные, сохраняет заявку в базе данных со статусом «Создана» и автоматически формирует уведомление для туроператора.
Далее процесс переходит к туроператору, который рассматривает заявку. На этом шаге возможны два варианта развития:
‒	если туроператор подтверждает заявку, система обновляет её статус на «Подтверждена» и уведомляет клиента;
‒	если туроператор отклоняет заявку, система фиксирует статус «Отклонена», уведомляет клиента и переводит заявку в архив.
В случае подтверждения заявка становится активной. Здесь также возможны два сценария:
‒	клиент может отменить заявку до начала тура, и тогда система меняет статус на «Отменена клиентом» и архивирует её;
‒	если тур состоялся, система переводит заявку в статус «Завершена» и затем архивирует.
Процесс завершается в состоянии «Архивирована», что означает сохранение заявки для истории и аналитики.

<img width="974" height="390" alt="image" src="https://github.com/user-attachments/assets/26784238-ff9e-4ae6-9626-7f0a22b649f8" />
Диаграмма компонентов отражает целостную архитектуру решения и демонстрирует взаимодействие всех ключевых подсистем. На стороне клиента (Frontend) расположены модули пользовательского интерфейса – BookingUI, CatalogUI, ProfileUI, AuthUI и ReviewsUI, которые обеспечивают работу с бронированиями, каталогом туров и услуг, личным кабинетом, аутентификацией и отзывами. Все обращения к серверу выполняются через REST API по протоколу HTTP с использованием формата JSON и механизма авторизации JWT. Серверная часть (Backend) разделена на несколько логических блоков: сервисы (AuthService, BookingService, CatalogService, ReviewService), реализующие бизнес логику аутентификации, бронирований, управления турами и отзывами; контроллеры (AuthController, BookingController, TourController, ReviewController), принимающие запросы от клиента и делегирующие их обработку; обработчики команд и запросов (CQRS Handlers), которые реализуют принцип разделения операций чтения и записи, включая создание и отмену бронирований, получение информации о турах и управление отзывами; а также подсистема безопасности (SecurityConfig, JwtTokenProvider, JwtAuthenticationFilter, UserDetailsServiceImpl), обеспечивающая защиту всех вызовов и проверку прав доступа. Доступ к данным инкапсулирован в репозиториях (UserRepository, BookingRepository, TourRepository, ServiceRepository, ReviewRepository), которые взаимодействуют с реляционной базой данных. База данных содержит таблицы пользователей и ролей (users, user_roles), туров и услуг (tours, services, tour_services), бронирований (bookings, booking_services) и отзывов (reviews). Для асинхронного взаимодействия между сервисами используется брокер сообщений, через который BookingService публикует события о создании и отмене бронирований, CatalogService подписывается для обновления доступности туров, а ReviewService может использовать события для отправки уведомлений. 

<img width="783" height="389" alt="image" src="https://github.com/user-attachments/assets/82e0c5b1-c0f0-479e-8f40-f6232521ac19" />
На стороне клиента располагается Browser (браузер пользователя), который содержит статические ресурсы приложения: файл index.html, React компоненты и JS бандлы. Браузер получает эти ресурсы от фронтенд сервера и инициирует REST запросы к бэкенду.
Frontend Server развёрнут как сборка Vite/React и отвечает за отдачу клиенту статических файлов интерфейса. Он обслуживает запросы на загрузку приложения и перенаправляет обращения к серверу приложений.
Backend Server реализован на основе Spring Boot и развёрнут в виде JAR приложения. В его составе находятся REST контроллеры, сервисы (AuthService, BookingService, CatalogService, ReviewService), обработчики команд и запросов (CQRS Handlers), а также фильтры безопасности JWT. Этот сервер обрабатывает бизнес логику системы, обеспечивает авторизацию и аутентификацию пользователей, управляет бронированиями, турами и отзывами.
Database Server развёрнут на MySQL и содержит все основные таблицы предметной области: users, user_roles, bookings, booking_services, tours, tour_services, services, reviews. Доступ к базе данных осуществляется через репозитории с использованием JDBC.

### Спецификация API

Представить описание реализованных функциональных возможностей ПС с использованием Open API (можно представить либо полный файл спецификации, либо ссылку на него)

### Безопасность

Описать подходы, использованные для обеспечения безопасности, включая описание процессов аутентификации и авторизации с примерами кода из репозитория сервера

### Оценка качества кода

Используя показатели качества и метрики кода, оценить его качество

---

## **Тестирование**

### Unit-тесты

Представить код тестов для пяти методов и его пояснение

### Интеграционные тесты

Представить код тестов и его пояснение

---

## **Установка и  запуск**

### Манифесты для сборки docker образов

Представить весь код манифестов или ссылки на файлы с ними (при необходимости снабдить комментариями)

### Манифесты для развертывания k8s кластера

Представить весь код манифестов или ссылки на файлы с ними (при необходимости снабдить комментариями)

---

## **Лицензия**

Этот проект лицензирован по лицензии MIT - подробности представлены в файле [[License.md|LICENSE.md]]

---

## **Контакты**

Автор: email
